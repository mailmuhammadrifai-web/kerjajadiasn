<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Paket 2 Premium - Kerja Jadi ASN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#8B5CF6">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #f8fafc 0%, #f3f4f6 100%);
            overflow-x: hidden;
        }

        /* Premium Effects */
        .premium-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .gold-gradient {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .premium-border {
            position: relative;
            border: 2px solid transparent;
            background-clip: padding-box;
            background-origin: border-box;
            background-image: linear-gradient(135deg, #667eea, #764ba2, #f093fb, #f5576c);
        }

        .premium-border::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb, #f5576c);
            border-radius: inherit;
            z-index: -1;
        }

        /* Status Badges */
        .status-badge {
            font-size: 0.65rem;
            padding: 0.35rem 1rem;
            border-radius: 9999px;
            font-weight: 800;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .status-premium {
            background: linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .status-vip {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .status-completed {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
        }

        .status-pending {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            color: white;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.5); }
            50% { box-shadow: 0 0 40px rgba(139, 92, 246, 0.8); }
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        .animate-pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        .shimmer-text {
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            background-size: 200% 100%;
            animation: shimmer 3s infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Card Effects */
        .premium-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        .premium-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(139, 92, 246, 0.15);
            border-color: #8B5CF6;
        }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(139, 92, 246, 0.1);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #8B5CF6, #6366F1);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #7C3AED, #4F46E5);
        }

        /* Rank Badge */
        .rank-badge {
            background: linear-gradient(135deg, #F59E0B, #D97706);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
            position: relative;
            overflow: hidden;
        }

        .rank-badge::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transform: rotate(45deg);
            animation: shimmer 2s infinite;
        }

        /* Progress Ring */
        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring__circle {
            transition: stroke-dashoffset 0.5s ease;
            transform: rotate(90deg);
            transform-origin: 50% 50%;
        }

        /* Loading Skeleton */
        .loading-skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .mobile-stack {
                flex-direction: column !important;
            }
            
            .mobile-full {
                width: 100% !important;
            }
            
            .mobile-center {
                text-align: center !important;
            }
            
            .mobile-hide {
                display: none !important;
            }
        }

        /* Print Styles */
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .premium-card {
                box-shadow: none !important;
                border: 1px solid #ddd !important;
            }
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            z-index: 1000;
            pointer-events: none;
            opacity: 0.8;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
        }

        .tooltip-text {
            visibility: hidden;
            position: absolute;
            z-index: 100;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #1e293b, #334155);
            color: white;
            text-align: center;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-50 to-indigo-50">

    <!-- Confetti Container -->
    <div id="confetti-container"></div>

    <!-- Notification Toast -->
    <div id="notification-toast" class="fixed top-6 right-6 z-50 hidden">
        <div class="glass-effect rounded-2xl shadow-2xl p-4 max-w-sm animate__animated animate__slideInRight">
            <div class="flex items-start gap-3">
                <div id="toast-icon" class="text-2xl"></div>
                <div class="flex-1">
                    <h4 id="toast-title" class="font-bold text-slate-800 text-lg"></h4>
                    <p id="toast-message" class="text-sm text-slate-600 mt-1"></p>
                </div>
                <button onclick="hideToast()" class="text-slate-400 hover:text-slate-600 transition-colors">
                    <i class="fa-solid fa-times text-lg"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="glass-effect sticky top-0 z-40 border-b border-white/30 shadow-xl">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg animate-pulse-glow">
                            <i class="fa-solid fa-crown text-white text-lg"></i>
                        </div>
                        <div>
                            <h1 class="font-extrabold text-transparent text-xl bg-clip-text bg-gradient-to-r from-purple-600 to-indigo-600">
                                KERJA JADI <span class="text-yellow-500">ASN</span>
                            </h1>
                            <p class="text-xs text-slate-500 font-semibold">Paket 2 Premium</p>
                        </div>
                    </div>
                    <span class="status-badge status-premium hidden md:inline-flex">
                        <i class="fa-solid fa-gem mr-2"></i>Premium
                    </span>
                </div>

                <div class="flex items-center gap-6">
                    <div class="hidden md:block">
                        <div class="text-right">
                            <p class="text-[10px] font-bold text-slate-500 uppercase tracking-wider">PIN Peserta</p>
                            <div class="flex items-center gap-2">
                                <p id="displayPin" class="text-sm font-black text-slate-800 tracking-wide font-mono">LOADING...</p>
                                <button onclick="copyPin()" class="text-slate-400 hover:text-purple-600 tooltip transition-colors">
                                    <span class="tooltip-text">Salin PIN ke Clipboard</span>
                                    <i class="fa-regular fa-copy text-sm"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="relative">
                        <button onclick="toggleProfileMenu()" class="w-12 h-12 rounded-full bg-gradient-to-r from-purple-100 to-indigo-100 border-2 border-white shadow-lg flex items-center justify-center hover:shadow-xl transition-all hover:scale-105">
                            <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-full flex items-center justify-center">
                                <i class="fa-solid fa-user text-white"></i>
                            </div>
                        </button>

                        <!-- Profile Dropdown -->
                        <div id="profileMenu" class="absolute right-0 top-14 w-64 bg-white rounded-2xl shadow-2xl border border-slate-100 py-2 hidden z-50 animate__animated animate__fadeIn">
                            <div class="px-4 py-3 border-b border-slate-100">
                                <div class="flex items-center gap-2 mb-2">
                                    <i class="fa-solid fa-crown text-yellow-500"></i>
                                    <p class="text-xs font-bold text-slate-500 uppercase">Paket 2 Premium</p>
                                </div>
                                <p id="menuPin" class="text-sm font-black text-slate-800 truncate"></p>
                                <p class="text-xs text-slate-500 mt-1">15 Tryout + Materi Lengkap</p>
                            </div>

                            <div class="py-1">
                                <a href="#" onclick="showProgressModal()" class="flex items-center gap-3 px-4 py-2 text-sm text-slate-700 hover:bg-purple-50 hover:text-purple-600 transition-all">
                                    <i class="fa-solid fa-chart-line w-5 text-purple-500"></i>
                                    <span>Progress Belajar</span>
                                </a>
                                <a href="#" onclick="showRankingModal()" class="flex items-center gap-3 px-4 py-2 text-sm text-slate-700 hover:bg-purple-50 hover:text-purple-600 transition-all">
                                    <i class="fa-solid fa-trophy w-5 text-yellow-500"></i>
                                    <span>Ranking Nasional</span>
                                </a>
                                <a href="#" onclick="showAchievements()" class="flex items-center gap-3 px-4 py-2 text-sm text-slate-700 hover:bg-purple-50 hover:text-purple-600 transition-all">
                                    <i class="fa-solid fa-award w-5 text-blue-500"></i>
                                    <span>Pencapaian</span>
                                </a>
                            </div>

                            <div class="border-t border-slate-100 my-1"></div>

                            <div class="py-1">
                                <a href="#" onclick="showSettings()" class="flex items-center gap-3 px-4 py-2 text-sm text-slate-700 hover:bg-purple-50 hover:text-purple-600 transition-all">
                                    <i class="fa-solid fa-gear w-5 text-slate-500"></i>
                                    <span>Pengaturan</span>
                                </a>
                                <a href="#" onclick="confirmLogout()" class="flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-all">
                                    <i class="fa-solid fa-arrow-right-from-bracket w-5"></i>
                                    <span>Keluar Dashboard</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6 md:py-8">
        <!-- Session Warning -->
        <div id="sessionWarning" class="mb-6 gold-gradient rounded-2xl p-4 hidden shadow-lg">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center shadow-lg">
                        <i class="fa-solid fa-clock text-white"></i>
                    </div>
                    <div>
                        <p class="text-sm font-bold text-slate-800">Sesi Anda akan berakhir dalam <span id="sessionCountdown" class="font-mono text-purple-600"></span></p>
                        <p class="text-xs text-slate-600">Simpan progress Anda sebelum sesi berakhir</p>
                    </div>
                </div>
                <button onclick="extendSession()" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-4 py-2 rounded-lg font-bold hover:shadow-lg transition-all">
                    <i class="fa-solid fa-plus mr-2"></i>Perpanjang
                </button>
            </div>
        </div>

        <!-- Welcome Banner -->
        <div class="premium-gradient rounded-3xl p-6 md:p-8 mb-8 text-white relative overflow-hidden shadow-2xl animate__animated animate__fadeIn">
            <div class="absolute inset-0 bg-black/20"></div>
            <div class="relative z-10">
                <div class="flex flex-col lg:flex-row lg:items-center justify-between gap-6">
                    <div class="flex-1">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                <i class="fa-solid fa-crown text-yellow-300 text-xl"></i>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <span class="status-badge bg-white/20 backdrop-blur-sm border border-white/30">Paket 2 Premium</span>
                                <span class="status-badge status-vip"><i class="fa-solid fa-star mr-1"></i>Paling Laris</span>
                                <span class="status-badge bg-green-500/20 backdrop-blur-sm border border-green-300/30 text-green-100">Materi Lengkap</span>
                            </div>
                        </div>

                        <h2 class="text-3xl md:text-4xl font-bold mb-4 leading-tight">Akses Lengkap Persiapan<br>ASN Premium Anda!</h2>
                        <p class="text-white/90 mb-6 max-w-2xl text-lg">15 tryout premium + modul materi lengkap SKD (TWK, TIU, TKP) + ranking nasional + grup VIP!</p>

                        <div class="flex flex-wrap gap-4 mb-6">
                            <div class="flex items-center gap-3 bg-white/10 border border-white/20 px-5 py-3 rounded-xl backdrop-blur-sm">
                                <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center shadow-lg">
                                    <i class="fa-solid fa-id-card-clip text-white"></i>
                                </div>
                                <div>
                                    <p class="text-[11px] font-bold text-white/80 uppercase mb-1">PIN Peserta</p>
                                    <p id="welcomePin" class="text-xl font-black tracking-wider font-mono shimmer-text">-------</p>
                                </div>
                            </div>

                            <div class="flex items-center gap-3 bg-white/10 border border-white/20 px-5 py-3 rounded-xl backdrop-blur-sm">
                                <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg flex items-center justify-center shadow-lg">
                                    <i class="fa-solid fa-gem text-white"></i>
                                </div>
                                <div>
                                    <p class="text-[11px] font-bold text-white/80 uppercase mb-1">Status Paket</p>
                                    <div class="flex items-center gap-2">
                                        <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                                        <p class="text-sm font-bold">Premium Aktif</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-wrap gap-3">
                            <button onclick="scrollToTryout()" class="bg-white text-purple-700 font-bold px-6 py-3 rounded-xl hover:bg-purple-50 transition-all shadow-lg hover:shadow-xl flex items-center gap-2">
                                <i class="fa-solid fa-play"></i> Mulai Tryout
                            </button>
                            <button onclick="showRankingModal()" class="bg-white/20 backdrop-blur-sm border border-white/30 text-white font-bold px-6 py-3 rounded-xl hover:bg-white/30 transition-all shadow-lg hover:shadow-xl flex items-center gap-2">
                                <i class="fa-solid fa-trophy"></i> Lihat Ranking
                            </button>
                            <button onclick="joinWhatsAppGroup()" class="bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold px-6 py-3 rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2">
                                <i class="fa-brands fa-whatsapp"></i> Join Grup VIP
                            </button>
                        </div>
                    </div>

                    <div class="hidden lg:block">
                        <div class="relative w-64 h-64">
                            <div class="absolute inset-0 bg-white/10 backdrop-blur-sm rounded-full"></div>
                            <div class="absolute inset-8 bg-gradient-to-br from-purple-400/80 to-pink-500/80 rounded-full flex items-center justify-center animate-float">
                                <i class="fa-solid fa-graduation-cap text-white text-7xl"></i>
                            </div>
                            <div class="absolute -top-2 -right-2 w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center shadow-2xl">
                                <span class="text-2xl font-black text-white">#1</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-3 gap-6 md:gap-8">
            <!-- Main Content -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Materi Lengkap SKD -->
                <div class="premium-card rounded-3xl p-6 md:p-8">
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg">
                                <i class="fa-solid fa-book-open text-white text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-slate-800 text-2xl">Materi Lengkap SKD</h3>
                                <p class="text-slate-600">Pelajari modul TWK, TIU, dan TKP secara mendalam</p>
                            </div>
                        </div>
                        <span class="status-badge status-premium"><i class="fa-solid fa-crown mr-2"></i>Premium</span>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- TWK Card -->
                        <div class="group">
                            <div class="premium-card rounded-2xl p-6 hover:border-purple-300 transition-all h-full">
                                <div class="flex items-center gap-4 mb-4">
                                    <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                                        <i class="fa-solid fa-flag text-white text-lg"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-slate-800 text-lg">Modul TWK</h4>
                                        <p class="text-xs text-slate-500 font-semibold">Wawasan Kebangsaan</p>
                                    </div>
                                </div>
                                <p class="text-slate-600 mb-6 text-sm">Pancasila, UUD 1945, NKRI, Bhinneka Tunggal Ika, Sejarah Perjuangan Bangsa, dan Negara Kesatuan Republik Indonesia</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-slate-500"><i class="fa-solid fa-file-pdf mr-1"></i>150 Halaman</span>
                                    <a href="modul-twk.html?id=${pinAkses}" class="text-purple-600 font-bold text-sm hover:text-purple-700 transition-colors flex items-center gap-2">
                                        Buka Modul <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- TIU Card -->
                        <div class="group">
                            <div class="premium-card rounded-2xl p-6 hover:border-purple-300 transition-all h-full">
                                <div class="flex items-center gap-4 mb-4">
                                    <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                                        <i class="fa-solid fa-brain text-white text-lg"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-slate-800 text-lg">Modul TIU</h4>
                                        <p class="text-xs text-slate-500 font-semibold">Tes Intelegensi Umum</p>
                                    </div>
                                </div>
                                <p class="text-slate-600 mb-6 text-sm">Verbal, Numerik, Logika, Analitik, dan Figural untuk meningkatkan kemampuan berpikir kritis dan analitis</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-slate-500"><i class="fa-solid fa-file-pdf mr-1"></i>200 Halaman</span>
                                    <a href="modul-tiu.html?id=${pinAkses}" class="text-purple-600 font-bold text-sm hover:text-purple-700 transition-colors flex items-center gap-2">
                                        Buka Modul <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- TKP Card -->
                        <div class="group">
                            <div class="premium-card rounded-2xl p-6 hover:border-purple-300 transition-all h-full">
                                <div class="flex items-center gap-4 mb-4">
                                    <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                                        <i class="fa-solid fa-users text-white text-lg"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-slate-800 text-lg">Modul TKP</h4>
                                        <p class="text-xs text-slate-500 font-semibold">Karakteristik Pribadi</p>
                                    </div>
                                </div>
                                <p class="text-slate-600 mb-6 text-sm">Pelayanan Publik, Integritas, Semangat Gotong Royong, Sosial Budaya, dan Profesionalisme</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-slate-500"><i class="fa-solid fa-file-pdf mr-1"></i>180 Halaman</span>
                                    <a href="modul-tkp.html?id=${pinAkses}" class="text-purple-600 font-bold text-sm hover:text-purple-700 transition-colors flex items-center gap-2">
                                        Buka Modul <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Simulasi Tryout Section -->
                <div id="tryoutSection" class="space-y-6">
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                        <div>
                            <h3 class="font-bold text-slate-800 text-2xl flex items-center gap-3">
                                <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center shadow-lg">
                                    <i class="fa-solid fa-laptop-code text-white"></i>
                                </div>
                                Simulasi Tryout Premium (15 Paket)
                            </h3>
                            <p class="text-slate-600 mt-2">Pilih paket tryout untuk dikerjakan. Setiap paket mencakup TWK, TIU, dan TKP</p>
                        </div>

                        <div class="flex items-center gap-4">
                            <div class="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-100">
                                <p class="text-xs font-bold text-slate-500 uppercase mb-1">Selesai</p>
                                <div class="flex items-center gap-2">
                                    <span id="completedCount" class="text-2xl font-black text-purple-600">0</span>
                                    <span class="text-slate-400">/</span>
                                    <span class="text-slate-700 font-bold text-xl">15</span>
                                </div>
                            </div>

                            <div class="flex items-center gap-2">
                                <button onclick="refreshSoalList()" class="w-10 h-10 rounded-xl bg-slate-100 hover:bg-slate-200 flex items-center justify-center transition-all hover:scale-105 tooltip">
                                    <span class="tooltip-text">Refresh daftar soal</span>
                                    <i class="fa-solid fa-rotate text-slate-600"></i>
                                </button>
                                <button onclick="toggleSort()" id="sortButton" class="w-10 h-10 rounded-xl bg-slate-100 hover:bg-slate-200 flex items-center justify-center transition-all hover:scale-105 tooltip">
                                    <span class="tooltip-text" id="sortTooltip">Urutkan A-Z</span>
                                    <i class="fa-solid fa-arrow-down-a-z text-slate-600"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Filter Tabs -->
                    <div class="flex gap-2 mb-4 overflow-x-auto pb-3 custom-scrollbar">
                        <button onclick="filterSoal('all')" id="filter-all" class="px-5 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-sm font-bold transition-all hover:shadow-lg">
                            Semua (15)
                        </button>
                        <button onclick="filterSoal('completed')" id="filter-completed" class="px-5 py-3 rounded-xl bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-bold transition-all hover:shadow-lg flex items-center gap-2">
                            <i class="fa-solid fa-check text-green-500"></i>Selesai
                        </button>
                        <button onclick="filterSoal('pending')" id="filter-pending" class="px-5 py-3 rounded-xl bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-bold transition-all hover:shadow-lg flex items-center gap-2">
                            <i class="fa-solid fa-clock text-yellow-500"></i>Belum
                        </button>
                        <button onclick="filterSoal('best')" id="filter-best" class="px-5 py-3 rounded-xl bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-bold transition-all hover:shadow-lg flex items-center gap-2">
                            <i class="fa-solid fa-crown text-purple-500"></i>Terbaik
                        </button>
                    </div>

                    <!-- Loading State -->
                    <div id="loadingState" class="space-y-4">
                        <div class="premium-card rounded-2xl p-5">
                            <div class="flex items-center gap-4">
                                <div class="loading-skeleton w-14 h-14 rounded-xl"></div>
                                <div class="flex-1 space-y-2">
                                    <div class="loading-skeleton h-5 w-64 rounded"></div>
                                    <div class="loading-skeleton h-4 w-48 rounded"></div>
                                </div>
                                <div class="loading-skeleton w-28 h-12 rounded-xl"></div>
                            </div>
                        </div>
                        <div class="premium-card rounded-2xl p-5">
                            <div class="flex items-center gap-4">
                                <div class="loading-skeleton w-14 h-14 rounded-xl"></div>
                                <div class="flex-1 space-y-2">
                                    <div class="loading-skeleton h-5 w-64 rounded"></div>
                                    <div class="loading-skeleton h-4 w-48 rounded"></div>
                                </div>
                                <div class="loading-skeleton w-28 h-12 rounded-xl"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Soal List Container -->
                    <div id="soalListContainer" class="space-y-4 hidden">
                        <!-- Soal cards will be dynamically inserted here -->
                    </div>

                    <!-- Empty State -->
                    <div id="emptyState" class="hidden text-center py-12">
                        <div class="w-24 h-24 bg-gradient-to-br from-purple-100 to-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fa-solid fa-inbox text-purple-500 text-4xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-slate-800 mb-2">Belum Ada Paket Tersedia</h3>
                        <p class="text-slate-600 mb-6">Semua paket tryout sedang dalam persiapan.</p>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- Ranking Nasional Card -->
                <div class="premium-card rounded-3xl p-6">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center shadow-lg">
                                <i class="fa-solid fa-trophy text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-slate-800 text-lg">Ranking Nasional</h4>
                                <p class="text-xs text-slate-500">Peringkat Anda secara nasional</p>
                            </div>
                        </div>
                        <i class="fa-solid fa-globe-asia text-purple-400 text-xl"></i>
                    </div>

                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl border border-yellow-100">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center shadow-lg">
                                    <span class="text-white font-black text-lg" id="userRank">-</span>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-slate-700">Peringkat Anda</p>
                                    <p class="text-xs text-slate-500">Dari 5.000+ peserta</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-2xl font-black text-purple-600" id="userScore">-</p>
                                <p class="text-xs text-slate-500">Total Skor</p>
                            </div>
                        </div>

                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gradient-to-br from-yellow-100 to-yellow-50 rounded-lg flex items-center justify-center">
                                        <span class="text-yellow-600 font-bold">1</span>
                                    </div>
                                    <p class="text-sm text-slate-700">Juara 1 Nasional</p>
                                </div>
                                <span class="text-sm font-bold text-slate-800">495</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gradient-to-br from-slate-100 to-slate-50 rounded-lg flex items-center justify-center">
                                        <span class="text-slate-600 font-bold">2</span>
                                    </div>
                                    <p class="text-sm text-slate-700">Juara 2 Nasional</p>
                                </div>
                                <span class="text-sm font-bold text-slate-800">489</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gradient-to-br from-amber-100 to-amber-50 rounded-lg flex items-center justify-center">
                                        <span class="text-amber-600 font-bold">3</span>
                                    </div>
                                    <p class="text-sm text-slate-700">Juara 3 Nasional</p>
                                </div>
                                <span class="text-sm font-bold text-slate-800">485</span>
                            </div>
                        </div>

                        <button onclick="showRankingModal()" class="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-3 rounded-xl hover:shadow-xl transition-all hover:scale-[1.02] flex items-center justify-center gap-2 mt-4">
                            <i class="fa-solid fa-list-ol"></i> Lihat Ranking Lengkap
                        </button>
                    </div>
                </div>

                <!-- Progress Ring Card -->
                <div class="premium-card rounded-3xl p-6">
                    <h4 class="font-bold text-slate-800 mb-6 text-center text-lg">Progress Keseluruhan</h4>

                    <div class="flex flex-col items-center justify-center mb-6">
                        <div class="relative w-48 h-48 mb-6">
                            <svg class="w-full h-full progress-ring" viewBox="0 0 36 36">
                                <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                    fill="none"
                                    stroke="#e2e8f0"
                                    stroke-width="3"
                                />
                                <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                    fill="none"
                                    stroke="url(#gradient)"
                                    stroke-width="3"
                                    stroke-dasharray="100, 100"
                                    stroke-linecap="round"
                                    id="progressRing"
                                    class="progress-ring__circle"
                                />
                                <defs>
                                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stop-color="#8B5CF6" />
                                        <stop offset="50%" stop-color="#6366F1" />
                                        <stop offset="100%" stop-color="#EC4899" />
                                    </linearGradient>
                                </defs>
                            </svg>
                            <div class="absolute inset-0 flex flex-col items-center justify-center">
                                <span id="progressPercentage" class="text-4xl font-black text-slate-800">0%</span>
                                <span class="text-sm text-slate-500 mt-1">Selesai</span>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-6 w-full">
                            <div class="text-center">
                                <div class="text-3xl font-black text-purple-600" id="completedCountSmall">0</div>
                                <div class="text-sm text-slate-500">Terselesaikan</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-black text-slate-800" id="remainingCount">15</div>
                                <div class="text-sm text-slate-500">Tersisa</div>
                            </div>
                        </div>
                    </div>

                    <button onclick="showProgressModal()" class="w-full bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 text-purple-700 font-bold py-3 rounded-xl hover:bg-purple-100 transition-all hover:scale-[1.02] flex items-center justify-center gap-2">
                        <i class="fa-solid fa-chart-simple"></i> Lihat Detail Progress
                    </button>
                </div>

                <!-- Grup WhatsApp VIP -->
                <div class="premium-gradient rounded-3xl p-6 relative overflow-hidden">
                    <div class="absolute inset-0 bg-black/10"></div>
                    <div class="relative z-10">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                <i class="fa-brands fa-whatsapp text-white text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-black text-white text-lg">Grup Belajar VIP</h4>
                                <p class="text-white/90 text-sm">Akses eksklusif Paket 2</p>
                            </div>
                        </div>

                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-5 border border-white/20">
                            <div class="space-y-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                        <i class="fa-solid fa-user-tie text-white/90"></i>
                                    </div>
                                    <div>
                                        <p class="text-white text-sm font-bold">Mentor Berpengalaman</p>
                                        <p class="text-white/70 text-xs">Alumni ASN & CPNS</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                        <i class="fa-solid fa-comments text-white/90"></i>
                                    </div>
                                    <div>
                                        <p class="text-white text-sm font-bold">Diskusi Intensif</p>
                                        <p class="text-white/70 text-xs">Q&A langsung di WA</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                        <i class="fa-solid fa-users text-white/90"></i>
                                    </div>
                                    <div>
                                        <p class="text-white text-sm font-bold">Komunitas Premium</p>
                                        <p class="text-white/70 text-xs">200+ member aktif</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <a href="https://wa.me/6285696409288?text=Halo%20admin,%20saya%20peserta%20Paket%202%20dengan%20PIN:%20${pinAkses}%20mau%20join%20grup%20VIP" 
                           target="_blank" 
                           class="block w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-black py-3 rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center gap-2 relative overflow-hidden group">
                            <div class="absolute inset-0 bg-white/10 transform translate-x-full group-hover:translate-x-0 transition-transform duration-500"></div>
                            <i class="fa-brands fa-whatsapp text-xl relative z-10"></i>
                            <span class="relative z-10">Join Grup WhatsApp VIP</span>
                        </a>

                        <p class="text-white/80 text-xs text-center mt-4 flex items-center justify-center gap-2">
                            <i class="fa-solid fa-bolt"></i> Instant Access â€¢ 24/7 Support
                        </p>
                    </div>
                </div>

                <!-- Paket Tambahan -->
                <div class="gold-gradient rounded-3xl p-6 shadow-xl">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center shadow-lg">
                            <i class="fa-solid fa-plus text-white text-xl"></i>
                        </div>
                        <div>
                            <h4 class="font-black text-slate-800 text-lg">Butuh Lebih Banyak?</h4>
                            <p class="text-slate-600 text-sm">Tambahan tryout premium</p>
                        </div>
                    </div>

                    <div class="bg-white/50 backdrop-blur-sm rounded-xl p-4 mb-5 border border-amber-200">
                        <div class="flex justify-between items-center mb-3">
                            <div>
                                <p class="text-sm font-bold text-slate-800">Paket Tambahan Premium</p>
                                <p class="text-xs text-slate-600">+1 tryout dengan pembahasan</p>
                            </div>
                            <span class="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-2 rounded-full text-sm font-black shadow-lg">
                                Rp 25.000
                            </span>
                        </div>
                        <ul class="text-xs text-slate-600 space-y-1">
                            <li class="flex items-center gap-2">
                                <i class="fa-solid fa-check text-green-500"></i>
                                <span>Soal baru setiap bulan</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <i class="fa-solid fa-check text-green-500"></i>
                                <span>Pembahasan detail</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <i class="fa-solid fa-check text-green-500"></i>
                                <span>Akses instan</span>
                            </li>
                        </ul>
                    </div>

                    <button onclick="tambahPaket()" class="w-full bg-gradient-to-r from-amber-500 to-orange-500 text-white font-black py-3 rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center gap-2">
                        <i class="fa-solid fa-cart-shopping"></i> Beli Paket Tambahan
                    </button>

                    <p class="text-slate-600 text-xs text-center mt-4 flex items-center justify-center gap-2">
                        <i class="fa-solid fa-bolt"></i> Proses instan â€¢ Akses langsung
                    </p>
                </div>

                <!-- Quick Stats -->
                <div class="premium-card rounded-3xl p-6">
                    <h4 class="font-bold text-slate-800 mb-4 text-lg">Statistik Cepat</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4 text-center border border-purple-100">
                            <div class="text-3xl font-black text-purple-600" id="avgScore">-</div>
                            <div class="text-sm text-slate-500 mt-1">Rata-rata</div>
                        </div>
                        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 text-center border border-green-100">
                            <div class="text-3xl font-black text-green-600" id="bestScore">-</div>
                            <div class="text-sm text-slate-500 mt-1">Terbaik</div>
                        </div>
                        <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-4 text-center border border-blue-100">
                            <div class="text-3xl font-black text-blue-600" id="totalTime">0</div>
                            <div class="text-sm text-slate-500 mt-1">Jam</div>
                        </div>
                        <div class="bg-gradient-to-br from-pink-50 to-rose-50 rounded-xl p-4 text-center border border-pink-100">
                            <div class="text-3xl font-black text-pink-600" id="accuracy">-</div>
                            <div class="text-sm text-slate-500 mt-1">Akurasi</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="mt-16 pt-12 pb-10 bg-gradient-to-br from-slate-900 to-slate-800">
        <div class="container mx-auto px-4">
            <div class="flex flex-col lg:flex-row justify-between items-center gap-8">
                <div class="text-center lg:text-left">
                    <div class="flex items-center justify-center lg:justify-start gap-3 mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl flex items-center justify-center">
                            <i class="fa-solid fa-crown text-white"></i>
                        </div>
                        <h2 class="font-extrabold text-white text-xl">
                            KERJA JADI <span class="text-yellow-400">ASN</span>
                        </h2>
                    </div>
                    <p class="text-slate-300 text-sm max-w-md">
                        Platform tryout ASN premium terlengkap dengan 15 paket tryout, materi SKD komprehensif, ranking nasional, dan grup belajar VIP via WhatsApp.
                    </p>
                </div>

                <div class="text-center lg:text-right">
                    <div class="flex justify-center lg:justify-end gap-5 mb-4">
                        <a href="#" class="text-slate-400 hover:text-white transition-colors">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="https://wa.me/6285696409288" target="_blank" class="text-slate-400 hover:text-green-400 transition-colors">
                            <i class="fab fa-whatsapp text-xl"></i>
                        </a>
                        <a href="#" class="text-slate-400 hover:text-blue-400 transition-colors">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="#" class="text-slate-400 hover:text-blue-300 transition-colors">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                    </div>
                    <p class="text-slate-400 text-xs font-bold uppercase tracking-widest">
                        &copy; <span id="currentYear">2026</span> Kerja Jadi ASN. Paket 2 Premium.
                    </p>
                </div>
            </div>

            <div class="mt-10 pt-8 border-t border-slate-700 text-center">
                <div class="flex flex-wrap justify-center gap-6 text-sm text-slate-400">
                    <a href="#" class="hover:text-white transition-colors">Kebijakan Privasi</a>
                    <a href="#" class="hover:text-white transition-colors">Syarat & Ketentuan</a>
                    <a href="#" class="hover:text-white transition-colors">FAQ</a>
                    <a href="https://wa.me/6285696409288" target="_blank" class="hover:text-white transition-colors">Kontak Admin</a>
                    <a href="#" class="hover:text-white transition-colors">Karir</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Progress Modal -->
    <div id="progressModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 hidden p-4">
        <div class="bg-white rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl">
            <div class="sticky top-0 bg-white border-b border-slate-200 p-6 flex justify-between items-center">
                <div>
                    <h3 class="text-2xl font-bold text-slate-800">Detail Progress Belajar</h3>
                    <p class="text-sm text-slate-500">PIN: <span id="modalPin" class="font-mono font-bold text-purple-600"></span></p>
                </div>
                <button onclick="hideProgressModal()" class="text-slate-400 hover:text-slate-600 text-xl transition-colors">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>

            <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)] custom-scrollbar">
                <div id="progressContent"></div>
            </div>

            <div class="border-t border-slate-200 p-6 bg-slate-50">
                <button onclick="shareProgress()" class="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-3 rounded-xl hover:shadow-xl transition-all hover:scale-[1.02] flex items-center justify-center gap-2">
                    <i class="fa-solid fa-share"></i> Bagikan Progress
                </button>
            </div>
        </div>
    </div>

    <!-- Ranking Modal -->
    <div id="rankingModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 hidden p-4">
        <div class="bg-white rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl">
            <div class="sticky top-0 bg-white border-b border-slate-200 p-6 flex justify-between items-center">
                <div>
                    <h3 class="text-2xl font-bold text-slate-800 flex items-center gap-3">
                        <i class="fa-solid fa-trophy text-yellow-500"></i>
                        Ranking Nasional
                    </h3>
                    <p class="text-sm text-slate-500">Peringkat peserta Paket 2 secara nasional</p>
                </div>
                <button onclick="hideRankingModal()" class="text-slate-400 hover:text-slate-600 text-xl transition-colors">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>

            <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)] custom-scrollbar">
                <div id="rankingContent"></div>
            </div>
        </div>
    </div>

    <script>
        // ========== GLOBAL VARIABLES ==========
        let pinAkses = null;
        let sessionInterval = null;
        let sessionTimer = null;
        let isSortedAsc = true;
        let currentFilter = 'all';
        let userRank = Math.floor(Math.random() * 100) + 1; // Simulate random rank

        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('Dashboard Paket 2 Premium initializing...');

            // Set current year
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // Initialize dashboard
            await initializeDashboard();

            // Setup event listeners
            setupEventListeners();

            // Initial confetti
            setTimeout(() => {
                createConfettiBurst();
            }, 1500);

            console.log('Dashboard Paket 2 Premium initialized successfully');
        });

        // ========== DASHBOARD INITIALIZATION ==========
        async function initializeDashboard() {
            try {
                // Get PIN from URL
                const urlParams = new URLSearchParams(window.location.search);
                pinAkses = urlParams.get('id');

                if (!pinAkses) {
                    throw new Error('PIN tidak ditemukan');
                }

                // Validate PIN
                if (!/^[a-zA-Z0-9]{4,}$/.test(pinAkses)) {
                    throw new Error('Format PIN tidak valid');
                }

                // Save package info
                localStorage.setItem(`paket_peserta_${pinAkses}`, "2");

                // Show loading state
                showLoading();

                // Initialize session
                await initializeSession();

                // Update displays
                updatePINDisplays();
                updateRankingDisplay();

                // Load soal list
                await renderSoalList();

                // Update stats
                updateProgressStats();

                // Hide loading
                hideLoading();

                // Welcome notification
                showNotification('success', 'Selamat Datang!', `Anda login sebagai peserta Paket 2 Premium, PIN: ${pinAkses}`);

                // Track
                trackActivity('dashboard_loaded', { paket: 2 });

            } catch (error) {
                console.error('Initialization error:', error);
                showNotification('error', 'Kesalahan Login', error.message);

                setTimeout(() => {
                    window.location.href = 'login.html?error=' + encodeURIComponent(error.message);
                }, 3000);
            }
        }

        // ========== SESSION MANAGEMENT ==========
        async function initializeSession() {
            const sessionData = {
                pin: pinAkses,
                paket: 2,
                loginTime: new Date().toISOString(),
                expired: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(), // 24 hours
                lastActivity: new Date().toISOString()
            };

            localStorage.setItem(`session_${pinAkses}`, JSON.stringify(sessionData));
            sessionStorage.setItem('currentSession', JSON.stringify(sessionData));

            setupSessionTimer();
            setupActivityTracker();
        }

        function setupSessionTimer() {
            if (sessionTimer) clearInterval(sessionTimer);

            sessionTimer = setInterval(() => {
                const sessionStr = sessionStorage.getItem('currentSession');
                if (!sessionStr) {
                    handleSessionExpired();
                    return;
                }

                const session = JSON.parse(sessionStr);
                const expired = new Date(session.expired);
                const now = new Date();
                const diff = expired - now;

                if (diff <= 0) {
                    handleSessionExpired();
                    return;
                }

                updateSessionDisplay(diff);

                if (diff < 5 * 60 * 1000) {
                    showSessionWarning(diff);
                }
            }, 1000);
        }

        function updateSessionDisplay(diff) {
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            const timerStr = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            const sessionTimerElement = document.getElementById('sessionTimer');
            if (sessionTimerElement) {
                sessionTimerElement.textContent = timerStr;
            }
        }

        function showSessionWarning(diff) {
            const warningElement = document.getElementById('sessionWarning');
            const countdownElement = document.getElementById('sessionCountdown');

            if (!warningElement || !countdownElement) return;

            const minutes = Math.floor(diff / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            countdownElement.textContent = `${minutes}m ${seconds}s`;
            warningElement.classList.remove('hidden');
        }

        function extendSession() {
            const sessionStr = sessionStorage.getItem('currentSession');
            if (!sessionStr) return;

            const session = JSON.parse(sessionStr);
            session.expired = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString();

            sessionStorage.setItem('currentSession', JSON.stringify(session));
            localStorage.setItem(`session_${pinAkses}`, JSON.stringify(session));

            document.getElementById('sessionWarning').classList.add('hidden');
            showNotification('success', 'Sesi Diperpanjang', 'Sesi Anda telah diperpanjang 24 jam');
        }

        function setupActivityTracker() {
            document.addEventListener('click', updateLastActivity);
            document.addEventListener('keypress', updateLastActivity);
        }

        function updateLastActivity() {
            const sessionStr = sessionStorage.getItem('currentSession');
            if (!sessionStr) return;

            const session = JSON.parse(sessionStr);
            session.lastActivity = new Date().toISOString();
            sessionStorage.setItem('currentSession', JSON.stringify(session));
        }

        // ========== PIN MANAGEMENT ==========
        function updatePINDisplays() {
            const pinElements = ['displayPin', 'welcomePin', 'menuPin', 'modalPin'];
            pinElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = pinAkses;
            });
        }

        function copyPin() {
            navigator.clipboard.writeText(pinAkses)
                .then(() => {
                    showNotification('success', 'PIN Disalin', 'PIN telah disalin ke clipboard');
                })
                .catch(err => {
                    showNotification('error', 'Gagal Menyalin', 'Tidak dapat menyalin PIN');
                });
        }

        // ========== RANKING MANAGEMENT ==========
        function updateRankingDisplay() {
            document.getElementById('userRank').textContent = userRank;
            document.getElementById('userScore').textContent = Math.floor(Math.random() * 100) + 400; // Random score 400-500
        }

        // ========== SOAL LIST MANAGEMENT ==========
        async function renderSoalList() {
            try {
                document.getElementById('loadingState').classList.remove('hidden');
                document.getElementById('soalListContainer').classList.add('hidden');
                document.getElementById('emptyState').classList.add('hidden');

                await new Promise(resolve => setTimeout(resolve, 1000));

                const progressKey = `progress_${pinAkses}`;
                const progress = JSON.parse(localStorage.getItem(progressKey)) || {};

                const soalList = [];
                for (let i = 1; i <= 15; i++) {
                    const isCompleted = progress[`paket_${i}`] || false;
                    const score = progress[`score_${i}`] || null;
                    const completionTime = progress[`time_${i}`] || null;
                    const accuracy = progress[`accuracy_${i}`] || null;

                    soalList.push({
                        id: i,
                        title: `Simulasi SKD Premium Paket #${i}`,
                        description: 'TWK â€¢ TIU â€¢ TKP (110 Soal)',
                        isCompleted,
                        score,
                        completionTime,
                        accuracy,
                        link: `soalpaket${i}.html?id=${pinAkses}`,
                        bestScore: score && score >= 450
                    });
                }

                renderSoalCards(soalList);

                const completedCount = soalList.filter(s => s.isCompleted).length;
                updateCompletedCount(completedCount);

                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('soalListContainer').classList.remove('hidden');

                filterSoal(currentFilter);

            } catch (error) {
                console.error('Error rendering soal list:', error);
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('errorState').classList.remove('hidden');
            }
        }

        function renderSoalCards(soalList) {
            const container = document.getElementById('soalListContainer');
            container.innerHTML = '';

            if (soalList.length === 0) {
                document.getElementById('emptyState').classList.remove('hidden');
                return;
            }

            soalList.forEach(soal => {
                const card = createSoalCard(soal);
                container.innerHTML += card;
            });
        }

        function createSoalCard(soal) {
            const badge = soal.isCompleted 
                ? `<span class="status-badge status-completed"><i class="fa-solid fa-check mr-1"></i>Selesai</span>`
                : `<span class="status-badge status-pending"><i class="fa-solid fa-clock mr-1"></i>Belum</span>`;

            const scoreDisplay = soal.score 
                ? `<div class="flex items-center gap-2">
                        <div class="text-sm font-bold ${soal.score >= 450 ? 'text-green-600' : 'text-yellow-600'}">
                            <i class="fa-solid fa-star"></i> ${soal.score}
                        </div>
                        ${soal.bestScore ? '<span class="text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full"><i class="fa-solid fa-crown"></i> Terbaik</span>' : ''}
                   </div>`
                : '';

            const buttonText = soal.isCompleted ? '<i class="fa-solid fa-redo"></i> ULANGI' : '<i class="fa-solid fa-play"></i> KERJAKAN';
            const buttonClass = soal.isCompleted 
                ? 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700'
                : 'bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700';

            return `
                <div class="premium-card rounded-2xl p-5 soal-card" data-id="${soal.id}" data-completed="${soal.isCompleted}" data-score="${soal.score || 0}" data-best="${soal.bestScore}">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4 flex-1">
                            <div class="relative">
                                <div class="w-14 h-14 ${soal.isCompleted ? 'bg-gradient-to-br from-green-100 to-emerald-100 text-green-600' : 'bg-gradient-to-br from-purple-100 to-indigo-100 text-purple-600'} rounded-xl flex items-center justify-center font-black text-xl shadow-lg">
                                    ${soal.id}
                                    ${soal.isCompleted ? '<i class="fa-solid fa-check absolute -top-1 -right-1 text-xs bg-green-500 text-white rounded-full w-5 h-5 flex items-center justify-center"></i>' : ''}
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex flex-wrap items-center gap-2 mb-2">
                                    <h4 class="font-extrabold text-slate-800 text-lg">${soal.title}</h4>
                                    ${badge}
                                </div>
                                <p class="text-sm text-slate-500 font-medium uppercase tracking-wider mb-2">${soal.description}</p>
                                ${scoreDisplay}
                                ${soal.completionTime ? `<p class="text-xs text-slate-500 mt-2"><i class="fa-regular fa-clock mr-1"></i>${soal.completionTime}</p>` : ''}
                            </div>
                        </div>
                        <div class="flex flex-col items-end gap-3">
                            <a href="${soal.link}" class="${buttonClass} text-white px-6 py-3 rounded-xl text-sm font-bold shadow-lg hover:shadow-xl transition-all hover:scale-105 flex items-center gap-2 whitespace-nowrap">
                                ${buttonText}
                            </a>
                            ${soal.isCompleted ? `
                                <button onclick="showSoalDetail(${soal.id})" class="text-xs text-slate-500 hover:text-purple-600 transition-colors flex items-center gap-1">
                                    <i class="fa-solid fa-chart-bar"></i> Detail Hasil
                                </button>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
        }

        function updateCompletedCount(count) {
            const elements = ['completedCount', 'completedCountSmall'];
            elements.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = count;
            });

            document.getElementById('remainingCount').textContent = 15 - count;
            document.getElementById('quotaUsed').textContent = `${count}/15`;

            const progressPercentage = (count / 15) * 100;
            const progressBar = document.getElementById('quotaProgress');
            if (progressBar) progressBar.style.width = `${progressPercentage}%`;

            updateProgressRing(progressPercentage);
        }

        function updateProgressRing(percentage) {
            const progressRing = document.getElementById('progressRing');
            const progressPercentageElement = document.getElementById('progressPercentage');

            if (progressRing && progressPercentageElement) {
                const circumference = 2 * Math.PI * 15.9155;
                const dashOffset = circumference - (percentage / 100) * circumference;

                progressRing.setAttribute('stroke-dasharray', `${circumference} ${circumference}`);
                progressRing.setAttribute('stroke-dashoffset', dashOffset);

                progressPercentageElement.textContent = `${Math.round(percentage)}%`;
            }
        }

        function refreshSoalList() {
            showNotification('info', 'Memperbarui', 'Memuat ulang daftar soal...');
            renderSoalList();
        }

        function toggleSort() {
            const container = document.getElementById('soalListContainer');
            const cards = Array.from(container.children);

            cards.sort((a, b) => {
                const aId = parseInt(a.dataset.id);
                const bId = parseInt(b.dataset.id);
                return isSortedAsc ? aId - bId : bId - aId;
            });

            container.innerHTML = '';
            cards.forEach(card => container.appendChild(card));

            const sortButton = document.getElementById('sortButton');
            const icon = sortButton.querySelector('i');
            const tooltip = document.getElementById('sortTooltip');

            if (isSortedAsc) {
                icon.className = 'fa-solid fa-arrow-up-a-z';
                tooltip.textContent = 'Urutkan Z-A';
            } else {
                icon.className = 'fa-solid fa-arrow-down-a-z';
                tooltip.textContent = 'Urutkan A-Z';
            }

            isSortedAsc = !isSortedAsc;
        }

        function filterSoal(filter) {
            currentFilter = filter;
            const container = document.getElementById('soalListContainer');
            const cards = container.querySelectorAll('.soal-card');

            document.querySelectorAll('[onclick^="filterSoal"]').forEach(button => {
                button.classList.remove('bg-gradient-to-r', 'from-purple-600', 'to-indigo-600', 'text-white');
                button.classList.add('bg-slate-100', 'text-slate-700');
            });

            const activeButton = document.getElementById(`filter-${filter}`);
            if (activeButton) {
                activeButton.classList.remove('bg-slate-100', 'text-slate-700');
                activeButton.classList.add('bg-gradient-to-r', 'from-purple-600', 'to-indigo-600', 'text-white');
            }

            cards.forEach(card => {
                const isCompleted = card.dataset.completed === 'true';
                const score = parseInt(card.dataset.score);
                const isBest = card.dataset.best === 'true';

                let shouldShow = true;
                switch (filter) {
                    case 'completed': shouldShow = isCompleted; break;
                    case 'pending': shouldShow = !isCompleted; break;
                    case 'best': shouldShow = isBest; break;
                    default: shouldShow = true;
                }

                card.style.display = shouldShow ? 'block' : 'none';
            });
        }

        // ========== PROGRESS & STATISTICS ==========
        function updateProgressStats() {
            const progressKey = `progress_${pinAkses}`;
            const progress = JSON.parse(localStorage.getItem(progressKey)) || {};

            let totalScore = 0;
            let completedCount = 0;
            let bestScore = 0;
            let totalAccuracy = 0;
            let totalTime = 0;

            for (let i = 1; i <= 15; i++) {
                if (progress[`paket_${i}`]) {
                    completedCount++;
                    const score = progress[`score_${i}`] || 0;
                    totalScore += score;
                    if (score > bestScore) bestScore = score;
                    const accuracy = progress[`accuracy_${i}`] || 0;
                    totalAccuracy += accuracy;
                    totalTime += 2;
                }
            }

            const avgScore = completedCount > 0 ? Math.round(totalScore / completedCount) : '-';
            const avgAccuracy = completedCount > 0 ? Math.round(totalAccuracy / completedCount) : '-';

            document.getElementById('avgScore').textContent = avgScore;
            document.getElementById('bestScore').textContent = bestScore > 0 ? bestScore : '-';
            document.getElementById('totalTime').textContent = totalTime;
            document.getElementById('accuracy').textContent = avgAccuracy !== '-' ? `${avgAccuracy}%` : '-';
        }

        function showProgressModal() {
            const modal = document.getElementById('progressModal');
            const content = document.getElementById('progressContent');

            const progressKey = `progress_${pinAkses}`;
            const progress = JSON.parse(localStorage.getItem(progressKey)) || {};

            let progressHTML = `
                <div class="mb-8">
                    <h4 class="font-bold text-slate-800 mb-4 text-lg">Ringkasan Progress</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4 text-center border border-purple-100">
                            <div class="text-2xl font-black text-purple-600">${Object.keys(progress).filter(k => k.startsWith('paket_') && progress[k]).length}</div>
                            <div class="text-sm text-slate-600">Paket Selesai</div>
                        </div>
                        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 text-center border border-green-100">
                            <div class="text-2xl font-black text-green-600">${progress.bestScore || '-'}</div>
                            <div class="text-sm text-slate-600">Skor Terbaik</div>
                        </div>
                        <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-4 text-center border border-blue-100">
                            <div class="text-2xl font-black text-blue-600">${progress.totalTime || '0'}h</div>
                            <div class="text-sm text-slate-600">Total Waktu</div>
                        </div>
                        <div class="bg-gradient-to-br from-yellow-50 to-amber-50 rounded-xl p-4 text-center border border-yellow-100">
                            <div class="text-2xl font-black text-yellow-600">${progress.avgAccuracy || '-'}%</div>
                            <div class="text-sm text-slate-600">Akurasi</div>
                        </div>
                    </div>
                </div>
                
                <h4 class="font-bold text-slate-800 mb-4 text-lg">Detail per Paket</h4>
                <div class="space-y-3">
            `;

            for (let i = 1; i <= 15; i++) {
                const isCompleted = progress[`paket_${i}`] || false;
                const score = progress[`score_${i}`] || '-';
                const accuracy = progress[`accuracy_${i}`] || '-';
                const completionTime = progress[`time_${i}`] || '-';

                progressHTML += `
                    <div class="flex items-center justify-between p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 rounded-lg ${isCompleted ? 'bg-gradient-to-br from-green-100 to-emerald-100 text-green-600' : 'bg-slate-200 text-slate-500'} flex items-center justify-center font-bold shadow-sm">
                                ${i}
                            </div>
                            <div>
                                <p class="text-sm font-medium text-slate-800">Paket ${i} Premium</p>
                                <p class="text-xs text-slate-500">${isCompleted ? completionTime : 'Belum dimulai'}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-sm font-bold ${isCompleted ? (score >= 450 ? 'text-green-600' : 'text-yellow-600') : 'text-slate-400'}">
                                ${isCompleted ? `Skor: ${score}` : '-'}
                            </p>
                            ${isCompleted ? `<p class="text-xs text-slate-500">Akurasi: ${accuracy}%</p>` : ''}
                        </div>
                    </div>
                `;
            }

            progressHTML += `</div>`;
            content.innerHTML = progressHTML;
            modal.classList.remove('hidden');
            document.getElementById('modalPin').textContent = pinAkses;
        }

        function showRankingModal() {
            const modal = document.getElementById('rankingModal');
            const content = document.getElementById('rankingContent');

            let rankingHTML = `
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="font-bold text-slate-800">Ranking Nasional Paket 2</h4>
                        <span class="text-sm text-slate-500">Total: 5.000+ peserta</span>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-200 rounded-xl p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center shadow-lg">
                                        <span class="text-white font-black">1</span>
                                    </div>
                                    <div>
                                        <p class="font-bold text-slate-800">Juara 1 Nasional</p>
                                        <p class="text-xs text-slate-500">PIN: ASN****1</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-xl font-black text-yellow-600">495</p>
                                    <p class="text-xs text-slate-500">Skor Tertinggi</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-r from-slate-50 to-slate-100 border border-slate-200 rounded-xl p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-slate-400 to-slate-500 rounded-lg flex items-center justify-center shadow-lg">
                                        <span class="text-white font-black">2</span>
                                    </div>
                                    <div>
                                        <p class="font-bold text-slate-800">Juara 2 Nasional</p>
                                        <p class="text-xs text-slate-500">PIN: ASN****2</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-xl font-black text-slate-600">489</p>
                                    <p class="text-xs text-slate-500">Skor Tertinggi</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg flex items-center justify-center shadow-lg">
                                        <span class="text-white font-black">3</span>
                                    </div>
                                    <div>
                                        <p class="font-bold text-slate-800">Juara 3 Nasional</p>
                                        <p class="text-xs text-slate-500">PIN: ASN****3</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-xl font-black text-amber-600">485</p>
                                    <p class="text-xs text-slate-500">Skor Tertinggi</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <h4 class="font-bold text-slate-800 mb-4">Peringkat Anda</h4>
                <div class="bg-gradient-to-r from-purple-50 to-indigo-50 border-2 border-purple-200 rounded-xl p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center shadow-lg">
                                <span class="text-white font-black text-lg">${userRank}</span>
                            </div>
                            <div>
                                <p class="font-bold text-slate-800">Peringkat Anda</p>
                                <p class="text-xs text-slate-500">PIN: ${pinAkses}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-black text-purple-600">${Math.floor(Math.random() * 100) + 400}</p>
                            <p class="text-xs text-slate-500">Skor Anda</p>
                        </div>
                    </div>
                </div>

                <div class="mt-6 p-4 bg-slate-50 rounded-xl">
                    <p class="text-sm text-slate-600">
                        <i class="fa-solid fa-info-circle text-purple-500 mr-2"></i>
                        Ranking diperbarui setiap hari. Kerjakan lebih banyak tryout untuk meningkatkan peringkat!
                    </p>
                </div>
            `;

            content.innerHTML = rankingHTML;
            modal.classList.remove('hidden');
        }

        function hideProgressModal() {
            document.getElementById('progressModal').classList.add('hidden');
        }

        function hideRankingModal() {
            document.getElementById('rankingModal').classList.add('hidden');
        }

        // ========== NOTIFICATION SYSTEM ==========
        function showNotification(type, title, message, isHTML = false) {
            const toast = document.getElementById('notification-toast');
            const toastIcon = document.getElementById('toast-icon');
            const toastTitle = document.getElementById('toast-title');
            const toastMessage = document.getElementById('toast-message');

            let iconClass, bgColor;
            switch (type) {
                case 'success':
                    iconClass = 'fa-solid fa-circle-check text-green-500';
                    bgColor = 'bg-green-50 border-green-200';
                    break;
                case 'error':
                    iconClass = 'fa-solid fa-circle-xmark text-red-500';
                    bgColor = 'bg-red-50 border-red-200';
                    break;
                case 'warning':
                    iconClass = 'fa-solid fa-triangle-exclamation text-yellow-500';
                    bgColor = 'bg-yellow-50 border-yellow-200';
                    break;
                default:
                    iconClass = 'fa-solid fa-circle-info text-purple-500';
                    bgColor = 'bg-purple-50 border-purple-200';
            }

            toastIcon.className = iconClass;
            toastTitle.textContent = title;
            
            if (isHTML) {
                toastMessage.innerHTML = message;
            } else {
                toastMessage.textContent = message;
            }

            toast.querySelector('div').className = `glass-effect rounded-2xl shadow-2xl p-4 max-w-sm animate__animated animate__slideInRight ${bgColor}`;
            toast.classList.remove('hidden');

            setTimeout(hideToast, 5000);
        }

        function hideToast() {
            document.getElementById('notification-toast').classList.add('hidden');
        }

        // ========== UI FUNCTIONS ==========
        function toggleProfileMenu() {
            document.getElementById('profileMenu').classList.toggle('hidden');
        }

        function scrollToTryout() {
            document.getElementById('tryoutSection').scrollIntoView({ behavior: 'smooth' });
        }

        function joinWhatsAppGroup() {
            window.open(`https://wa.me/6285696409288?text=Halo%20admin,%20saya%20peserta%20Paket%202%20dengan%20PIN:%20${pinAkses}%20mau%20join%20grup%20VIP`, '_blank');
        }

        function tambahPaket() {
            if (!confirm('Anda akan diarahkan ke WhatsApp untuk pembelian paket tambahan (Rp 25.000). Lanjutkan?')) {
                return;
            }

            const noAdmin = "6285696409288"; 
            const pesan = `Halo Admin Kerja Jadi ASN,%0A%0ASaya ingin *Tambah 1 Paket Tryout Premium* (Rp 25.000).%0A*PIN Peserta:* ${pinAkses}%0A*Paket:* 2 Premium%0A%0AMohon diproses informasinya. Terima kasih!`;

            window.open(`https://api.whatsapp.com/send?phone=${noAdmin}&text=${pesan}`, '_blank');
        }

        function showLoading() {
            document.body.classList.add('loading');
        }

        function hideLoading() {
            document.body.classList.remove('loading');
        }

        // ========== CONFETTI EFFECT ==========
        function createConfetti() {
            if (document.getElementById('confetti-container').children.length > 100) return;

            const colors = ['#8B5CF6', '#6366F1', '#EC4899', '#10B981', '#F59E0B', '#EF4444'];
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.width = Math.random() * 15 + 5 + 'px';
            confetti.style.height = Math.random() * 15 + 5 + 'px';
            confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
            confetti.style.opacity = Math.random() * 0.7 + 0.3;

            document.getElementById('confetti-container').appendChild(confetti);

            let position = -20;
            const speed = Math.random() * 5 + 3;
            const rotation = Math.random() * 20 - 10;

            const animate = () => {
                position += speed;
                confetti.style.top = position + 'px';
                confetti.style.transform = `rotate(${rotation * position / 10}deg)`;

                if (position < window.innerHeight) {
                    requestAnimationFrame(animate);
                } else {
                    confetti.remove();
                }
            };

            animate();
        }

        function createConfettiBurst() {
            for (let i = 0; i < 30; i++) {
                setTimeout(createConfetti, i * 50);
            }
        }

        // ========== EVENT LISTENERS ==========
        function setupEventListeners() {
            document.addEventListener('click', (event) => {
                const profileMenu = document.getElementById('profileMenu');
                const profileButton = document.querySelector('[onclick="toggleProfileMenu()"]');

                if (profileMenu && !profileMenu.contains(event.target) && !profileButton.contains(event.target)) {
                    profileMenu.classList.add('hidden');
                }

                const modals = ['progressModal', 'rankingModal'];
                modals.forEach(modalId => {
                    const modal = document.getElementById(modalId);
                    const modalContent = modal?.querySelector('div > div');

                    if (modal && !modal.classList.contains('hidden') && modalContent && !modalContent.contains(event.target)) {
                        modal.classList.add('hidden');
                    }
                });
            });

            document.addEventListener('keydown', (event) => {
                if (event.key === 'F5') {
                    event.preventDefault();
                    refreshSoalList();
                }
                if (event.ctrlKey && event.key === 'q') {
                    event.preventDefault();
                    confirmLogout();
                }
            });

            window.addEventListener('online', () => {
                showNotification('success', 'Koneksi Pulih', 'Anda kembali online');
            });

            window.addEventListener('offline', () => {
                showNotification('warning', 'Koneksi Hilang', 'Anda sedang offline');
            });
        }

        // ========== LOGOUT ==========
        function confirmLogout() {
            if (confirm('Apakah Anda yakin ingin keluar dari dashboard?')) {
                logout();
            }
        }

        function logout() {
            if (sessionTimer) clearInterval(sessionTimer);
            sessionStorage.removeItem('currentSession');
            
            showNotification('success', 'Berhasil Logout', 'Anda telah keluar dari dashboard');
            
            setTimeout(() => {
                window.location.href = 'login.html?message=logout_success';
            }, 1500);
        }

        // ========== ANALYTICS ==========
        function trackActivity(action, detail = {}) {
            const activity = {
                pin: pinAkses,
                action,
                timestamp: new Date().toISOString(),
                ...detail
            };

            const activities = JSON.parse(localStorage.getItem('userActivities') || '[]');
            activities.push(activity);
            localStorage.setItem('userActivities', JSON.stringify(activities.slice(-100)));
        }

        // ========== INITIAL CONFETTI ==========
        setInterval(() => {
            if (Math.random() < 0.005) {
                createConfetti();
            }
        }, 1000);
    </script>
</body>
</html>